<div id="lppie"></div>
<script>
	(function () {
		var data = [{DATA}];


		var width = 160,
			height = 160,
			radius = 90;

		var arc = d3.arc()
			.outerRadius(radius - 10)
			.innerRadius(30);

		var pie = d3.pie()
			.sort(null)
			.value(function (d) {
				return d.reached;
			});

		var svg = d3.select('#lppie').append("svg")
			.attr("width", width)
			.attr("height", height)
			.append("g")
			.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

		var g = svg.selectAll(".arc")
			.data(pie(data))
			.enter().append("g");

		g.append("path")
			.attr("d", arc)
			.style("fill", function (d, i) {
				return d.data.color;
			});

		g.append("text")
			.attr("transform", function (d) {
				var _d = arc.centroid(d);
				_d[0] *= 1;	//multiply by a constant factor
				_d[1] *= 1;	//multiply by a constant factor
				return "translate(" + _d + ")";
			})
			.style('fill', "#434343")
			.attr("dy", ".50em")
			.style("text-anchor", "middle")
			.text(function (d) {
				return d.data.reached_label;
			});


		g.append("text")
			.attr("text-anchor", "middle")
			.attr('font-size', '2em')
			.attr('y', 10)
			.text(data[0].length)
	})();
</script>
